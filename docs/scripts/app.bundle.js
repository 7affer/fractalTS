!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(1),t.exports=n(13)},function(t,e,n){"use strict";function a(){var t=new Array;t.push(new y.GradData(0,new w.Color(0,0,0))),t.push(new y.GradData(99,new w.Color(255,255,255)));var e=new y.GradOptions(t,r,i);$.fn.grad=y.GradPlugin,$(".gradslider").grad(e),$(".colorpicker").minicolors({inline:!0,changeDelay:200,change:function(t,e){var n=new w.Color;n.parsehex(t),$(".gradslider").grad().setcolor(n),i($(".gradslider").grad().getgradient())}}),G.setlevel(1),o(),s(t)}function r(t,e){$(".colorpicker").minicolors("value",e.color.tohex())}function i(t){v.setgradient(t),v.redraw(!1),f.setgradient(t),f.redraw(!1)}function s(t){B.width=E.width=$(window).width(),B.height=E.height=$(window).height(),v=new b.FractalBuilder("mandelbrot"),f=new x.JuliaBuilder("julia"),v.setcanvas(B),f.setcanvas(E),v.beforeevent=function(){return $(".label-mandel").addClass("loading")},v.afterevent=function(){return $(".label-mandel").removeClass("loading")},f.beforeevent=function(){return $(".label-julia").addClass("loading")},f.afterevent=function(){return $(".label-julia").removeClass("loading")},v.setgradient(t),f.setgradient(t),v.redraw(),f.redraw(),v.onzoomin=function(){G.setlevel(2)},v.onzoomout=function(){G.setlevel(3)},v.ondrag=function(){G.setlevel(5)},f.onzoomin=function(){G.setlevel(2)},f.onzoomout=function(){G.setlevel(3)},f.ondrag=function(){G.setlevel(5)}}function o(){var t=(document.getElementById("in_steps"),document.getElementsByName("supersampling")),e=document.getElementsByName("type"),n=document.getElementById("reset"),a=document.getElementById("mainform"),r=document.getElementById("addcolor"),i=document.getElementById("deletecolor"),s=document.getElementById("save"),o=document.getElementsByName("fakecheck"),m=document.getElementById("menu-toggle");a.addEventListener("submit",h,!1),n.addEventListener("click",g,!1),B.addEventListener("click",p,!1),r.addEventListener("click",d,!1),i.addEventListener("click",c,!1),s.addEventListener("click",l,!1),m.addEventListener("click",function(){G.setlevel(7)},!1);for(var y=0;y<t.length;y++)t[y].addEventListener("change",h,!1);for(var y=0;y<e.length;y++)e[y].addEventListener("change",function(){f.center=v.center=new k.Point(0,0),f.pixelratio=v.pixelratio=.008,h(null)},!1);for(var y=0;y<o.length;y++)o[y].addEventListener("change",function(){G.setlevel(6)},!1);setInterval(function(){var t=$(window).width(),e=$(window).height();t==I&&e==D||u()},300)}function l(){var t=$(".fakecheck:checked + label canvas")[0],e=t.toDataURL("image/png");e=e.replace(/^data:image\/[^;]*/,"data:application/octet-stream"),e=e.replace(/^data:application\/octet-stream/,"data:application/octet-stream;headers=Content-Disposition%3A%20attachment%3B%20filename=Canvas.png"),this.href=e}function d(){$(".gradslider").grad().addcolor(new w.Color(255,255,255));var t=$(".gradslider").grad().getgradient();i(t)}function c(){var t=$(".gradslider .handle.selected").index();$(".gradslider .handle.selected").remove(),$(".gradslider").grad().deletecolor(t);var e=$(".gradslider").grad().getgradient();i(e)}function u(){I=$(window).width(),D=$(window).height(),B.width=E.width=I,B.height=E.height=D,v.redraw(),f.redraw()}function h(t){var e=document.getElementById("in_steps"),n=document.getElementsByName("supersampling"),a=document.getElementsByName("type");v.steps=parseInt(e.value,10),f.steps=parseInt(e.value,10);for(var r=0;r<n.length;r++)n[r].checked&&(v.supersampling=parseInt(n[r].value,10),f.supersampling=parseInt(n[r].value,10));for(var r=0;r<a.length;r++)a[r].checked&&(v.type="mandelbrot"==a[r].value?"mandelbrot":"ship",f.type="mandelbrot"==a[r].value?"julia":"juliaship");var i=$(".gradslider").grad().getgradient();v.setgradient(i),f.setgradient(i),v.redraw(),f.redraw(),t.preventDefault()}function p(t){var e=m.getcoords(t,B,v.pixelratio,v.center);f.jconstant=e,f.redraw(),G.setlevel(4)}function g(t){f.center=v.center=new k.Point(0,0),f.pixelratio=v.pixelratio=.008,v.redraw(),f.redraw()}var v,f,m=n(2),y=n(4),w=n(6),b=n(9),x=n(12),k=n(3),C=n(20),B=document.getElementById("canvasm"),E=document.getElementById("canvasj"),I=$(window).width(),D=$(window).height(),G=new C.Tutorial(".tutorial-message");a()},function(t,e,n){"use strict";function a(t,e,n){return t/n*e}function r(t,e){var n=t.getBoundingClientRect(),a=t.width/n.width,r=t.height/n.height,i={x:(e.clientX-n.left)*a,y:(e.clientY-n.top)*r};return i}function i(t,e,n,a){var i=r(e,t);return new s.Point((i.x-e.width/2)*n+a.x,(e.height/2-i.y)*n+a.y)}var s=n(3);e.scaleto=a,e.getclickposition=r,e.getcoords=i},function(t,e){"use strict";var n=function(){function t(t,e){this.x=t,this.y=e}return t}();e.Point=n},function(t,e,n){"use strict";function a(t){var e=this,n=e.data("gradbw");return null==n&&(n=new s.GradBody(e,t),e.data("gradbw",n)),n}var r=n(5);e.GradData=r.GradData;var i=n(7);e.GradOptions=i.GradOptions;var s=n(8);e.GradBody=s.GradBody,e.GradPlugin=a},function(t,e,n){"use strict";var a=n(6);e.Color=a.Color;var r=function(){function t(t,e){void 0===e&&(e=new a.Color),this.value=t,this.color=e}return t}();e.GradData=r},function(t,e){"use strict";var n=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=n}return t.prototype.tohex=function(){var t=this.r.toString(16);t=t.length<2?"0"+t:t;var e=this.g.toString(16);e=e.length<2?"0"+e:e;var n=this.b.toString(16);return n=n.length<2?"0"+n:n,"#"+t+e+n},t.prototype.torgb=function(){return"rgb("+this.r+","+this.g+","+this.b+")"},t.prototype.parsehex=function(t){var e=t.substr(1,2),n=t.substr(3,2),a=t.substr(5,2);this.r=parseInt(e,16),this.g=parseInt(n,16),this.b=parseInt(a,16)},t}();e.Color=n},function(t,e){"use strict";var n=function(){function t(t,e,n){void 0===e&&(e=function(){}),void 0===n&&(n=function(){}),this.values=t,this.sliderclick=e,this.setgradient=n}return t}();e.GradOptions=n},function(t,e,n){"use strict";var a=n(5),r=n(6),i=function(){function t(t,e){this.datalabel="graddata",this.instance=t,this.sliderclick=e.sliderclick,this.setgradient=e.setgradient,this.values=e.values||[new a.GradData(0),new a.GradData(100,new r.Color(255,255,255))],this.render(),this.updatehandlespositions(),this.instance.find(".handle").first().addClass("selected")}return t.prototype.getgradient=function(){return _.orderBy(this.values,["value","asc"])},t.prototype.renderhtml=function(){var t=this;t.instance.addClass("bwslider");for(var e=t.instance.find(".handle");e.length<t.values.length;)t.instance.append($("<span>").addClass("handle").draggable({containment:"parent",axis:"x",drag:function(){t.instance.find(".handle").removeClass("selected"),$(this).addClass("selected"),t.updatevalues(),t.updatehandlesstyles(),t.updatecontrolgradient()},stop:function(){t.instance.find(".handle").removeClass("selected"),$(this).addClass("selected"),t.updatevalues(),t.updatehandlesstyles(),t.updatecontrolgradient(),t.setgradient(t.values)}}).click(function(){t.instance.find(".handle").removeClass("selected"),$(this).addClass("selected"),t.sliderclick(this,$(this).data(t.datalabel))})),e=t.instance.find(".handle")},t.prototype.sethandledata=function(){var t=this;t.instance.find(".handle").each(function(e){$(this).data(t.datalabel,t.values[e])})},t.prototype.updatehandlesstyles=function(){var t=this;t.instance.find(".handle").each(function(){var e=$(this).data(t.datalabel);$(this).css({background:e.color.tohex()})})},t.prototype.updatehandlespositions=function(){var t=this;t.instance.find(".handle").each(function(){var e=$(this).data(t.datalabel);$(this).css({left:e.value+"%"})})},t.prototype.updatecontrolgradient=function(){for(var t=this,e="",n=_.orderBy(t.values,["value","asc"]),a=0;a<n.length;a++)e+=", "+n[a].color.tohex()+" "+n[a].value+"%";t.instance.css("background-image","-webkit-linear-gradient(left "+e+")"),t.instance.css("background-image","-moz-linear-gradient(to right "+e+")"),t.instance.css("background-image","-o-linear-gradient(left "+e+")"),t.instance.css("background-image","linear-gradient(left "+e+")")},t.prototype.render=function(){var t=this;t.instance.addClass("bwslider"),t.renderhtml(),t.sethandledata(),t.updatehandlesstyles(),t.updatecontrolgradient()},t.prototype.updatevalues=function(){var t=this;t.instance.find(".handle").each(function(e){var n=$(this).data(t.datalabel);n.value=Math.floor($(this).position().left/t.instance.width()*100),$(this).data(t.datalabel,n),t.values[e]=n})},t.prototype.addcolor=function(t){var e=this;e.values.push(new a.GradData(50,t)),e.render(),e.updatehandlespositions(),e.instance.find(".handle").removeClass("selected"),e.instance.find(".handle").last().addClass("selected")},t.prototype.setcolor=function(t){var e=this,n=e.instance.find(".handle.selected");if(n.length>0){var a=n.data(e.datalabel);null!=a&&(a.color=t,n.data(e.datalabel,a),e.updatevalues(),e.updatehandlesstyles(),e.updatecontrolgradient())}},t.prototype.deletecolor=function(t){var e=this;e.values=_.remove(this.values,function(e,n){return n!=t}),e.render()},t.prototype.click=function(t){var e=this;e.sliderclick=t},t}();e.GradBody=i},function(t,e,n){"use strict";var a=n(2),r=n(10),i=n(3),s=n(11),o=function(){function t(t){this.type=t,this.center=new i.Point(0,0),this.steps=80,this.pixelratio=.008,this.supersampling=1,this.handleEvent=function(t){var e=t,n=t,r=this;if(r.ready)switch(t.type){case"mousedown":r.dragcoords=a.getclickposition(r.canvas,e);break;case"mousewheel":case"DOMMouseScroll":if("DOMMouseScroll"==t.type&&n.detail>0||"mousewheel"==t.type&&n.deltaY>0)r.zoomout();else{var i=a.getcoords(e,r.canvas,r.pixelratio,r.center);r.zoomin(i)}n.preventDefault();break;case"mouseup":var s=a.getclickposition(r.canvas,e);r.drag(s)}};var e=this;e.ready=!0,e.dataparts=new Array,e.threadsnumber=navigator.hardwareConcurrency,"undefined"==typeof e.threadsnumber&&(e.threadsnumber=4),e.workers=[];for(var n=function(t){e.workers.push(new Worker("./scripts/worker.bundle.js")),e.workers[t].onmessage=function(n){var a=new r.ResponseData;a.data=new Uint32Array(n.data),a.threadid=t,e.dataparts.push(a),e.checkready()}},s=0;s<e.threadsnumber;s++)n(s)}return t.prototype.setcanvas=function(t){var e=this;e.canvas=t,e.canvas.addEventListener("mousedown",e,!1),e.canvas.addEventListener("mousewheel",e,!1),e.canvas.addEventListener("DOMMouseScroll",e,!1),e.canvas.addEventListener("mouseup",e,!1),e.canvas.addEventListener("gestureend",e,!1)},t.prototype.zoomin=function(t){this.center=t,this.pixelratio*=.5,this.redraw(!0),this.onzoomin()},t.prototype.zoomout=function(){2*this.pixelratio<=.008&&(this.pixelratio*=2,this.redraw(!0),this.onzoomout())},t.prototype.drag=function(t){if(null!=this.dragcoords){var e={x:this.dragcoords.x-t.x,y:this.dragcoords.y-t.y};e.x>3&&e.y>3&&(this.center.x+=e.x*this.pixelratio,this.center.y-=e.y*this.pixelratio,this.redraw(!0),this.ondrag())}},t.prototype.generate=function(){var t=this;t.timer=(new Date).getTime(),t.ready=!1;for(var e=Math.floor(t.canvas.height/t.threadsnumber),n={type:t.type,width:t.canvas.width,height:e,steps:t.steps,pixelratio:t.pixelratio,x:t.center.x,y:-t.center.y-t.pixelratio*e*(t.threadsnumber/2-.5),supersampling:t.supersampling},a=0;a<t.threadsnumber;a++)t.workers[a].postMessage(n),n.y+=t.pixelratio*e},t.prototype.checkready=function(){this.dataparts.length==this.threadsnumber&&(this.data=_.chain(this.dataparts).sortBy("threadid").map(function(t){return t.data}).value(),this.repaint(),this.dataparts=new Array,this.ready=!0,"undefined"!=typeof console&&console.log("\n\t\t\t\t\tType: "+this.type+"\n\t\t\t\t\tSubsampling: "+this.supersampling+" \n\t\t\t\t\tthreadsnumber: "+this.threadsnumber+"\n\t\t\t\t\tTime: "+((new Date).getTime()-this.timer)))},t.prototype.redraw=function(t){void 0===t&&(t=!0),this.ready&&(null!=this.beforeevent&&this.beforeevent(),t?this.generate():this.repaint())},t.prototype.repaint=function(){for(var t=this.canvas.getContext("2d"),e=this.canvas.width,n=this.canvas.height,a=t.createImageData(e,n),r=0,i=0;i<this.data.length;i++)for(var s=0;s<this.data[i].length;s++)a.data[r++]=this.redcolorchanel[this.data[i][s]],a.data[r++]=this.greencolorchanel[this.data[i][s]],a.data[r++]=this.bluecolorchanel[this.data[i][s]],a.data[r++]=255;t.putImageData(a,0,0),null!=this.afterevent&&this.afterevent()},t.prototype.setgradient=function(t){this.redcolorchanel=new Int16Array(this.steps+1),this.greencolorchanel=new Int16Array(this.steps+1),this.bluecolorchanel=new Int16Array(this.steps+1);for(var e=new s.ColorComputer(t),n=0;n<=this.steps;n++){var a=e.getcolor(this.steps,n);this.redcolorchanel[n]=a.r,this.greencolorchanel[n]=a.g,this.bluecolorchanel[n]=a.b}},t}();e.FractalBuilder=o},function(t,e){"use strict";var n=function(){function t(){}return t}();e.ResponseData=n},function(t,e,n){"use strict";var a=n(5),r=n(6),i=function(){function t(t){if(t=_.orderBy(t,["value"]),t[0].value>0){var e=new Array;e.push(new a.GradData(0,t[0].color)),t=e.concat(t)}if(t[t.length-1].value<100){var n=new Array;n.push(new a.GradData(100,t[t.length-1].color)),t=t.concat(n)}t=_.chain(t).groupBy("value").map(function(t){return t[0]}).value(),this.gradient=t}return t.prototype.getcolor=function(t,e){var n=e/t*100,a=this.getedges(n),i=a[0].value-a[1].value,s=a[0].value+a[1].value,o=(a[0].color.r-a[1].color.r)/i,l=(a[0].color.r+a[1].color.r-o*s)/2,d=function(t){return t*o+l},c=(a[0].color.g-a[1].color.g)/i,u=(a[0].color.g+a[1].color.g-c*s)/2,h=function(t){return t*c+u},p=(a[0].color.b-a[1].color.b)/i,g=(a[0].color.b+a[1].color.b-p*s)/2,v=function(t){return t*p+g};return new r.Color(d(e),h(e),v(e))},t.prototype.getedges=function(t){return 100==t?[this.gradient[this.gradient.length-2],this.gradient[this.gradient.length-1]]:[_.findLast(this.gradient,function(e){return e.value<=t}),_.find(this.gradient,function(e){return e.value>t})]},t}();e.ColorComputer=i},function(t,e,n){"use strict";var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=n(9),i=n(3),s=function(t){function e(e){t.call(this,e),this.jconstant=new i.Point(.12,.63)}return a(e,t),e.prototype.generate=function(){var t=this;t.timer=(new Date).getTime(),t.ready=!1;for(var e=Math.floor(t.canvas.height/t.threadsnumber),n={type:t.type,width:t.canvas.width,height:e,steps:t.steps,pixelratio:t.pixelratio,x:t.center.x,y:-t.center.y-t.pixelratio*e*(t.threadsnumber/2-.5),supersampling:t.supersampling,cx:t.jconstant.x,cy:-t.jconstant.y},a=0;a<t.threadsnumber;a++)t.workers[a].postMessage(n),n.y+=t.pixelratio*e},e}(r.FractalBuilder);e.JuliaBuilder=s},function(t,e){},,,,,,,function(t,e){"use strict";var n=function(){function t(t){this.selector=t,this.storagekey="tutorial",this.classmessage=".message",this.showcurrent=function(){$(""+this.selector).hide(),$(this.selector+" + .tooltip").hide(),$(""+this.selector+this.classmessage+this.getlevel()).show(),$(""+this.selector+this.classmessage+this.getlevel()+" + .tooltip").show()},this.setlevel=function(t){var e=this.getlevel();e+1==t&&localStorage.setItem(this.storagekey,t.toString()),this.showcurrent()},this.getlevel=function(){var t=localStorage.getItem(this.storagekey);return null==t&&(t=0),isNaN(parseInt(t,10))?0:parseInt(t,10)},$(""+this.selector).tooltip({trigger:"manual"}),$(""+this.selector).tooltip("show"),$(""+this.selector).hide(),$(this.selector+" + .tooltip").hide()}return t}();e.Tutorial=n}]);
//# sourceMappingURL=app.bundle.js.map